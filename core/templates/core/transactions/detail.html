{% extends "core/base.html" %}
{% load math_filters %}

{% block title %}Transaction Details Â· Transaction Hub{% endblock %}
{% block page_title %}Transaction Details{% endblock %}
{% block page_subtitle %}{{ transaction.get_type_display }} - {{ transaction.date|date:"Y-m-d H:i" }}{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px;">
    <table>
        <tr>
            <td style="font-weight: 600; color: var(--muted); width: 200px;">Date:</td>
            <td>{{ transaction.date|date:"Y-m-d H:i:s" }}</td>
        </tr>
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Client:</td>
            <td>
                <a href="{% url 'client_detail' transaction.client_exchange.client.pk %}" style="color: var(--accent); text-decoration: none;">
                    {{ transaction.client_exchange.client.name }}
                </a>
            </td>
        </tr>
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Exchange:</td>
            <td>{{ transaction.client_exchange.exchange.name }}</td>
        </tr>
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Type:</td>
            <td>
                <span class="badge {% if transaction.type == 'FUNDING' %}badge-success{% else %}badge-muted{% endif %}">
                    {{ transaction.get_type_display }}
                </span>
            </td>
        </tr>
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Amount:</td>
            <td>{{ transaction.amount|floatformat:0 }}</td>
        </tr>
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Exchange Balance After:</td>
            <td>{{ transaction.exchange_balance_after|floatformat:0 }}</td>
        </tr>
        {% if transaction.notes %}
        <tr>
            <td style="font-weight: 600; color: var(--muted); vertical-align: top;">Notes:</td>
            <td>{{ transaction.notes|linebreaks }}</td>
        </tr>
        {% endif %}
        <tr>
            <td style="font-weight: 600; color: var(--muted);">Created:</td>
            <td>{{ transaction.created_at|date:"Y-m-d H:i:s" }}</td>
        </tr>
    </table>
    
    <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
        <a href="{% url 'exchange_account_detail' transaction.client_exchange.pk %}" class="btn btn-primary">View Account</a>
        <a href="{% url 'transaction_list' %}" class="btn" style="margin-left: 8px;">Back to Transactions</a>
    </div>
</div>
{% endblock %}
